## 网络

Docker 提供了三种网络模式，分别是 **null、host 和 bridge**。

##  一、null模式

**null** 是最简单的模式，也就是没有网络，但允许其他的网络插件来自定义网络连接。

##  二、host

**host** 的意思是直接使用宿主机网络，相当于去掉了容器的网络隔离（其他隔离依然保留），**所有的容器会共享宿主机的 IP 地址和网卡**。这种模式没有中间层，自然通信效率高，但缺少了隔离，运行太多的容器也容易导致端口冲突。

host 模式需要在 docker run 时使用 --net=host 参数，下面我就用这个参数启动 Nginx：

```sh
docker run -d --rm --net=host nginx:alpine
```

## 三、bridge

桥接模式，它有点类似现实世界里的交换机、路由器，只不过是由软件虚拟出来的，容器和宿主机再通过虚拟网卡接入这个网桥（图中的 docker0），那么它们之间也就可以正常的收发网络数据包了。不过和 host 模式相比，bridge 模式多了虚拟网桥和网卡，通信效率会低一些。

![6e0d05cf19720f0.jpeg](https://pic2.imgdb.cn/item/6454c66e0d2dde57773350f5.webp)

和 host 模式一样，我们也可以用 --net=bridge 来启用桥接模式，但其实并没有这个必要，因为 **Docker 默认的网络模式就是 bridge**。

### 1、如何分配服务端口号

**端口号映射需要使用 bridge 模式，并且在** **docker run** **启动容器时使用** **-p** **参数，形式和共享目录的** **-v** **参数很类似，用: 分隔本机端口和容器端口**。比如，如果要启动1个 Nginx 容器，跑在8080 端口上：

```sh
docker run -d -p 8080:80 --rm nginx:alpine
```



