## 大系统小做-大规模服务化架构

## 一、何为大系统小做
就是拆系统，即业务垂直化，架构师根据系统功能不同拆分出多个业务模块，再由不同的业务团队复制承建，分而治之，独立部署。

## 二、架构上变动
### 1、集群架构

### 2、垂直拆分业务子系统

### 3、服务化架构
* SOA
* 微服务

## 三、服务治理

### 1、包括
服务注册/发现，服务限流，服务熔断，负载均衡，服务路由，配置管理，服务监控等。

服务注册/发现
* 服务端发现模式
* 客户端发现模式(选型时优先考虑)

### 2、警惕因超时和重试引起的系统雪崩
其中还要注意类似写操作失败后，考虑到幂等性，不应该进行重试，避免数据重复写入。

### 3、其他
服务化框架的核心是RPC。
在特别注重性能的场景下，二进制协议更适合。

### 4、服务治理调用链

设计目标
* 服务性能低损耗
* 业务代码低侵入
* 监控界面可视化
* 数据分析准实时

### 5、基于非侵入式运行期AOP方案实现数据采集上报
AOP：面向切面编程

* 日志记录
* 异常记录
* 事务处理
* 权限检查
* 性能统计
* 流控管理

将这快逻辑从业务代码中剥离，形成一个独立的模块，以一种声明式的，可插拔式的方式应用到具体逻辑代码中。









