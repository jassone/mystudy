## 星罗棋布-分库分表方案

## 一、数据库读写分离
解决单库高负载压力。

## 二、数据库垂直分库

## 三、数据库水平分库与水平分表
### 1、水平分表

### 2、mysql sharding方案
使用sharding中间件。比如shark。

## 四、分库分表后的影响
### 1、全局唯一id解决方案
* shark自带的id生成器。
* 分布式id生成器。

### 2、基于solr的多维度复杂条件查询

### 3、分布式事务
详见“分布式事务”章节

## 五、数据库HA方案
详见“数据库高可用方案”章节

### 1、保障主备切换过程中数据一致性

详见“数据库高可用方案”章节

## 六、订单业务冗余表需求
### 1、两种方式
* 数据同步写入
* 数据异步写入(利用消息队列，推荐)

### 2、数据最终一致性方案
* 消息队列。
* 阿里的Canal中间件。



 

