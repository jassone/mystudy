## 公共表在分布系统中的应用
被其他业务模块共享的基础数据表，被称为公共表比如：系统用户表、行政区划、组织机构、系统配置。

### 1、分布式环境下公共表会遇到哪些新问题？

![20221231150049.jpg](https://pic.imgdb.cn/item/61ceaaba2ab3f51d919b13d3.jpg)假如用户表有4000万数据，在查询时不小心没有索引，导致磁盘IO直接拉满，`其他表`访问就会出现高延迟。

当团队规模扩大时，某些研发可能能力不够，导致犯错误，进而造成不可控。

### 2、架构方案
* 实时数据，将公共表下沉为基础服务* 业务模块上浮为业务服务* 业务应用通过RPC、RESTful API访问

![23232323.png](https://pic.imgdb.cn/item/61ceeeb32ab3f51d91d6993b.png)

优点
* 数据层面解耦，有独立的服务器资源支撑* 团队之间解耦，谁的模块谁负责缺点* 开发起来真的麻烦* 如何屏蔽底层复杂度是架构设计的难点

### 3、其他方案
**使用SDK封装**
可以这样做，但不太好，原因有
* 如果是基于SDK的封装，与语言绑定，如果两个系统一个用Java 一个用Go，那封装的SDK就无法使用。
* 封装好的SDK如果更新，则所有引用端都需要升级SDK版本，这本身就产生了项目与项目，团队与团队之间的耦合，对于大规模分布式集群不利。
* SDK的引用更新往往伴随着重新启动才能生效，大规模应用集群重启本身就是一种灾难。
