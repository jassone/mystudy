## 动静分离
静态数据是”`无个性化`”数据
* 静态文件: HTML/CSS/JS/图片
* 低频变动数据: 字典数据 / 地区数据 / 组织架构 / 历史数据

动态数据就是`个性化/高频写`数据
* 个性化推荐 
* 高频写: 股市行情 / 5G信号数据 / 天气变化

如何将动态页面生成到静态页?

## 一、案例分析
以电商商品详情页面为例，价格，优惠信息变动比较快，其他变动很慢。

## 二、首先进行页面静态化处理

### 1、页面静态化技术
![kjhgfgh.png](https://pic.imgdb.cn/item/61dee25d2ab3f51d91baa430.png)

将动态页面”另存为”静态页面保存到本地磁盘，利用Nginx直接路由到磁盘文件,不再进入后端。

##### 缺点
文件碎片化严重,文件同步管理麻烦。

### 2、页面伪静态化技术(推荐)
![dfdsdfdf.png](https://pic.imgdb.cn/item/61dee2f22ab3f51d91bb134a.png)

利用Redis缓存,缓存生成的页面。没有碎片化问题,可自动过期,数据管理轻松。

##### 缺点
需要大量内存存储信息

## 三、再进行动静整合方案

### 1、服务端SSI法-利用Nginx SSI特性实现服务端动静整合

![20220112222652.jpg](https://pic.imgdb.cn/item/61dee5762ab3f51d91bd09ec.jpg)
![20220112222727.jpg](https://pic.imgdb.cn/item/61dee5962ab3f51d91bd2043.jpg)

### 2、Ajax异步调用法-生成静态页面,动态数据部分发起Ajax异步查询

![20220112222754.jpg](https://pic.imgdb.cn/item/61dee5b02ab3f51d91bd35cf.jpg)


## 四、静态化缺点
* 静态化只适合数据集有限(百万量级)的场景
  热点商品SKU
* 页面集过大不适合静态化
   商品全量SKU,文件碎片太多
   批量同步磁盘IO瓶颈
   伪静态化内存开销太大
* 动态内容是静态化遇到的新挑战

