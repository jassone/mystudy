## 表引擎-MergeTree其他

这一系列表引擎中，以MergeTree为核心，确定了整个数据读写合并的机制，而扩展出来的的一系列“*MergeTree”则大都是在**数据合并的过程中定制数据合并的逻辑**。

## 一、SummingMergeTree

该引擎继承自MergeTree。区别在于，当合并 `SummingMergeTree` 表的数据片段时，ClickHouse 会把所有具有相同主键的行合并为一行，该行包含了被合并的行中具有数值数据类型的列的汇总值。如果主键的组合方式使得单个键值对应于大量的行，则可以显著的减少存储空间并加快数据查询的速度。

我们推荐将该引擎和 `MergeTree` 一起使用。例如，在准备做报告的时候，将完整的数据存储在 `MergeTree` 表中，并且使用 `SummingMergeTree` 来存储聚合数据。这种方法可以使你避免因为使用不正确的主键组合方式而丢失有价值的数据。

### 1、注意点

- 和ReplacingMergeTree一样，不能保证每次都能求和，也有求和时机的。

## 二、数据副本

只有 MergeTree 系列里的表可支持副本。

尽量往一个副本节点写入数据，如果某个副本数据缺失，把其他副本的metadata和data目录拷贝过来就行。
