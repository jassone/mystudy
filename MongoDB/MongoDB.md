## MongoDB



## 一、基本情况

### 1、优点
* 横向扩展能力：数据量和并发量增加时可以自动扩展。天然基于分片处理海量数据。
* 灵活模型：反范式设计，弱约束，结构灵活，方便管理，存储全量快照。
* 天然支持json(BSON，二进制json) ： 自己解析，建立索引，扩展性强，适合微服务/Rest API
* 支持json的schema查询。
* **自带故障转移(基于Raft算法实现集群选举)和读写分离**

todo
https://www.jianshu.com/p/69ffcd3c254b

### 2、缺点
* 不支持sql(没有表的概念)
* 反范式设计，a)数据字典的调整将成为软肋(比如某个地区改名，就要把所有记录字段用到的地方都改一下，而传统关系表数据库，只需要改下行政表的地区名称即可)。b)无具体字段定义，后期维护难度大。
* 空间的预分配机制(先分配一定空间，可能会浪费空间)
* 删除记录不释放空间(同mysql)
* 社区热度不温不火
* 不适用库存项目



## 二、版本情况
### 1、4.0版本
支持副本集上的多文档事务。即一个节点上，多行数据写的时候支持事务。

### 2、4.2版本
支持分布式事务，不需要依赖第三方组件。

## 三、适用场景
* 特别适合分布式noSql，适合海量数据存储（分片支持百亿数据）
* 医疗处方，因为字段类型非常不确定，直接存json
* 表记录变更历史/日志，直接将当前所有数据(快照)打包成json
*  做图床，这个很强的，特别是小文件
* 聊天记录，结构固定不怎么变，文本语音图片都存了，比其他方案方便
* 比如wiki、共享文档、新闻之类的，天生就适合
* 高并发（是mysql的五六倍，读查询在毫秒级别）

