## 静态库和动态库

## 一、共享代码

随着软件开发的发展，人们发现很多应用的代码是相同的，也就是说这些代码可以被共享，因此，人们提出了静态库和动态库两种方案来解决代码共享的问题。

## 二、静态库

静态库，顾名思义，它是静态的，也就是说它不会被动态编译，它只会静态编译，节省了编译时间，提高了编译速度。同一份静态库，可以被多个程序进行编译，也就实现了代码的复用共享。

## 三、动态库

动态库，就是程序应用启动的时候，动态加载的，因为它一般是在系统运行的时候就已经运行的动态库，因此其它应用可以直接使用它，并且同一个动态库可以被多个应用共享使用，在系统中对于一个动态库只会存在一份，这大大节省了内存空间，大大提升了系统的性能。

在linux系统中，动态库一般以.so形式命名，表示share object。

![f7a1bdcc61184cf31fabf4.png](https://pic.imgdb.cn/item/630f7a9a16f2c2beb1e62333.png)

很多时候，你很难知道一个应用需要哪些动态库，不过我们有个工具ldd可以帮助你查看一个应用需要哪些动态库。

如果一些动态库没有找到的话，程序就无法正常运行，这也是你会看到很多程序启动的时候提示缺少xx.so的原因。

## 四、总结

人们为了减少冗余代码，提出了共享库的概念，在链接的时候和程序一同打包成一个可执行文件的这个库就是静态库，反之，在链接的时候不将动态库打包进可执行文件，只是标记运行需要此共享库，这就是动态库。

静态库是同程序一同打包的，因此它不需要环境的依赖，而动态库是程序执行时候需要引用的，因此它对环境有依赖，这也是为什么很多依赖动态库的文件执行的时候报错缺少动态库的原因，那是操作系统缺少对应的动态库导致的。

静态库增大了程序的体积，同时多个程序对相同静态库的链接也占用了大量的内存，因此，才有了动态库的出现，可以说两者都是为了解决代码共享复用的问题，而且两者是相辅相成的关系。