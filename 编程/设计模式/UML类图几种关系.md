## UML类图几种关系
## 一、泛化(Generalization)
### 1、关系

**一种继承关系，表示一般与特殊的关系，是is关系。**

子类**继承**父类的所有结构和行为，它指定了子类如何特化父类的所有特征和行为。在子类中可以增加新的结构和行为，也可以覆写父类的行为。

### 2、箭头指向

带三角箭头的实线，箭头指向父类。
![1337431354_5691.jpeg](https://pic.imgdb.cn/item/62b4787e09475431294a9efd.jpg)

### 3、代码表现
extends

## 二、依赖(Dependency)
### 1、关系
是一种**使用**的关系，即一个类的实现需要另一个类的协助。通常情况下，依赖关系体现在某个类的方法使用另一个类作为参数。**所以要尽量不使用双向的互相依赖。**

### 2、箭头指向
带箭头的虚线，指向被使用者。
![1337431458_2379.jpeg](https://pic.imgdb.cn/item/62b47a9709475431294ddd5f.jpg)

### 3、代码表现
类名作为类型约束、局部变量、方法的参数或者对静态方法的调用。

```java
public class Screwdriver {//螺丝刀，作为人类的工具，是用来被人类使用的
}

public class Person{
    public void screw(Screwdriver src){ //拧螺丝，需使用螺丝刀
    }
}
```
Person类的screw()方法在使用时就得传入一个Screwdriver类型的参数，**这样Screwdriver的改变就会影响到Person。**

## 三、关联(Association)
### 1、关系
一种**拥有的结构关系**，**给定有关联的两个类，可以从一个类的对象得到另一个类的对象。它使一个类知道另一个类的属性和方法。**两个类之间的关联表示了两个**同等地位类**之间的结构关系。

* 双向关联:双向的关联可以有两个箭头或者没有箭头
* 单向关联:单向的关联有一个箭头
* 自关联:自己指向自己(比如链表的实现)

### 2、箭头指向

带普通箭头的实心线，指向被拥有者
![1337431398_4461.jpeg](https://pic.imgdb.cn/item/62b47cee094754312951bdf9.jpg)

### 3、代码表现
成员变量。

```java
public class Company { //公司
    private Employee emp ;  //一个公司雇员，公司与雇员之间就是一种关联关系。
}

public class Employee { //员工
}
```

雇员作为公司的属性，不同于依赖(依赖的话，雇员的改变会影响公司)。在这里雇员仅仅作为公司的一个属性而存在。因此Employee与Company之间是关联关系。

**关联关系还可以细分为聚合和组合两种。**

## 四、聚合(Aggregation)-关联
### 1、关系

聚合是一种**特殊的关联**。它描述了**“has a”关系，表示整体对象拥有部分对象。**

关联关系和聚合关系在语法上是没办法区分的，从**语义**上才能更好的区分两者的区别。**聚合是较强的关联关系，强调的是整体与部分之间的关系。**例如，学校和学生的关系。

好聚好散，所以生命周期可以不同。整体和部分都是可以独立存在的，生命周期之间没有什么必然的联系。

### 2、箭头指向

带空心菱形的实心线，**菱形指向整体**。
![1337431489_2954.jpeg](https://pic.imgdb.cn/item/62b47f0e094754312954e614.jpg)

### 3、代码表现
成员变量。

```java
public class Student{
}

public class School{  
    private List<Student> students ;  //学校与学生是聚合关系
}
```
学校是整体，而学生是部分。学校与学生都是可以独立存在的，之间没有什么必然的联系。因此学校与学生就是聚合关系。

## 五、组合(Composition)-关联

### 1、关系
**组合是关联的一种形式，也是整体和部分的关系。但它具有更强的拥有关系，强调整体与部分的生命周期是一致的，整体负责部分的生命周期的管理。**

例如Windows的窗口和窗口上的菜单就是组合关系。如果整体被销毁，部分也必须跟着一起被销毁。即部分不能离开整体而单独存在。

就是一个类里面有另一个类的一个引用。这个时候可以说“class-A has a class-B”。

### 2、箭头指向
带**实心**菱形的实线，菱形指向整体。
![1337431517_8009.jpeg](https://pic.imgdb.cn/item/62b47f0e094754312954e614.jpg)

### 3、代码实现
成员变量。

```java
public class Menu{
}

public class Window{
    private Menu memory = new Menu();
}
```

## 六、实现
### 1、关系
实现关系指定两个实体之间的一个合约。即一个实体定义一个合约，而另一个实体保证履行该合约。对类来说，就是一个类**实现**了一个接口。

### 2、箭头指向
带三角箭头的虚线，箭头指向接口

![1337431557_8347.jpeg](https://pic.imgdb.cn/item/62b4834e09475431295c39f9.jpg)

### 3、代码实现
implements。

```java
public interface Person{
}

public class Student implements Person{
}
```

## 七、总结
类间关系有很多种，在大的类别上可以分为两种：
* 纵向关系
* 横向关系。

### 1、纵向关系
就是继承关系，它的概念非常明确，也成为OO的三个重要特征之一。

### 2、横向关系
较为微妙，按照UML的建议大体上可以分为四种：
* 依赖
* 关联
* 聚合
* 组合

### 3、关联，聚合，组合的区分

区别他们只有通过判断关系双方之间的实际关系，如关系强弱、创建与销毁之间有无必要关联等。

##### a) 聚合和组合的区别在于

* **聚合关系是“has-a”关系，组合关系是“contains-a”关系**；聚合关系表示整体与部分的关系比较弱，而组合比较强；聚合关系中代表部分事物的对象与代表聚合事物的对象的生存期无关，一旦删除了聚合对象不一定就删除了代表部分事物的对象。组合中一旦删除了组合对象，同时也就删除了代表部分事物的对象。

* 组合中的一个对象在同一时刻只能属于一个组合对象，而聚合的一个部分对象可以被多个整体对象聚合，例如一个学生可以在多个学校就读，而一个菜单在同一时刻只能是某个窗口内的对象。

### 3、强弱关系

泛化 = 实现 > 组合 > 聚合 > 关联 > 依赖

* 组合的耦合度比泛化和实现小很多，只要类里的接口不变，一般不会出现泛化和实现里的一处改处处改的问题。毕竟，你是通过另一个类的引用调用其中的一些方法（函数）而已。

### 4、实现方式区别：

* 依赖关系：关系对象出现在类名作为类型约束、局部变量、方法的参数或者对静态方法的调用
* 关联关系：关系对象出现在成员变量中
* 聚合关系:  关系对象出现在成员变量中
* 合成关系：关系对象出现在成员变量中
* 泛化: extends
* 实现： implements

### 5、类图demo
![80dde9c9898.jpg](https://pic.imgdb.cn/item/62b5255a094754312909bd0a.jpg)