## main

```
http {
    ...
    server {
        ...
        chunked_transfer_encoding on;  # 确保分块传输开启
    }
}



## proxy_pass方式
server {
    listen 80;
    server_name example.com;

    location /stream {
        proxy_pass http://backend_service;
        #proxy_http_version 1.1;              # 使用 HTTP/1.1 支持 chunked 传输 ， 这个好像配置上就起不来了，可尝试关闭
        proxy_set_header Connection "";      # 防止 Nginx 添加 `Connection: close` 头
        proxy_buffering off;                 # 禁用缓冲，直接将数据流发送到客户端
        proxy_cache off;                     # 禁用缓存
    }
}


## fastcgi方式
location /fastcgi {
    fastcgi_pass backend;
    fastcgi_buffering off;  # 禁用缓冲
}

```

