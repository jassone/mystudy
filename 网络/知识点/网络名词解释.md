## 一、IP地址
IP地址被用来给Internet上的电脑一个编号。大家日常见到的情况是每台联网的PC上都需要有IP地址，才能正常通信。我们可以把“个人电脑”比作“一台电话”，那么“IP地址”就相当于“电话号码”，而Internet中的路由器，就相当于电信局的“程控式交换机”。

IP地址是一个32位的二进制数，通常被分割为4个“8位二进制数”（也就是4个字节）。IP地址通常用“点分十进制”表示成（a.b.c.d）的形式，其中，a,b,c,d都是0~255之间的十进制整数。例：点分十进IP地址（100.4.5.6），实际上是32位二进制数（01100100.00000100.00000101.00000110）。理论上ipv4最多提供43亿的ip地址。

![ED5BFB.png](https://pic.imgdb.cn/item/61616da62ab3f51d91b901a1.png)


A类，B类，C类

| 概念 | 特征 | 网络范围 |默认掩码|
| --- | --- | --- | --- |
| A类地址 | 第1个8位中的第1位始终为0 |0-127.x.x.x |255.0.0.0/8|
|  B类地址| 第1个8位中的第1、2位始终为10 |128-191.x.x.x|255.255.0.0/16|
| C类地址 |第1个8位中的第1、2、3位始终为110| 192-y.x.x.x|255.255.255.0/24|
	
			
特殊
D类 以1110开始 用于组播
E类 以11110开始 用于科研保留

范围上划分有些要注意的：
A类 从1.0.0.0 到126.255.255.255
B类 从128.0.0.0到191.255.255.255
C类 从192.0.0.0到223.255.255.255
其中127.x.x.x段地址空间是被保留的回环地址

> IP地址=网络地址+主机地址

如果IP地址是192.168.100.1,这个地址中包含了很多含义.如下所示:
* 网络地址(相当于街道地址): 192.168.100.0 
* 主机地址(相当于各户的门号): 0.0.0.1 
* IP地址(相当于住户地址): 网络地址+主机地址=192.168.100.1 
* 广播地址: 192.168.100.255 
* 地址掩码是：255.255.255.0

大部分情况，路由器只有一个网关，如果你有多出口，那就有多个网关。一般一个网络超过250台机器，那就要考虑划分子网了。也可以将子网掩码改一下，比如从255.255.255.0改成255.255.0.0。

##### 计算网络地址就是判断网络中的计算机在不在同一网络,在就能通,不在就不能通.

## 子网掩码
子网掩码(subnet mask)又叫网络掩码、地址掩码、子网络遮罩，它是一种用来指明一个IP地址的哪些位标识的是主机所在的子网，以及哪些位标识的是主机的位掩码。

子网掩码不能单独存在，它必须结合IP地址一起使用。子网掩码只有一个作用，就是将某个IP地址划分成网络地址和主机地址两部分。

子网掩码是一个32位地址，用于屏蔽IP地址的一部分以区别网络标识和主机标识，并说明该IP地址是在局域网上，还是在远程网上。

子网掩码使用屏蔽一个IP地址的网络部分的“全1”比特模式。对于A类地址来说，默认的子网掩码是255.0.0.0；对于B类地址来说默认的子网掩码是255.255.0.0；对于C类地址来说默认的子网掩码是255.255.255.0。

**掩码位：二进制子网掩码全为1的位数。**

* 通过子网掩码，就可以判断两个IP在不在一个局域网内部。

* 子网掩码可以看出有多少位是网络号，有多少位是主机号

## 广播地址(Broadcast Address)
广播地址(Broadcast Address)是专门用于同时向网络中所有工作站进行发送的一个地址。

在使用TCP/IP 协议的网络中，**主机标识段host ID 为全1 的IP 地址为广播地址**，广播的分组传送给host ID段所涉及的所有计算机。例如，对于10.1.1.0 （255.255.255.0）网段，其广播地址为10.1.1.255 （255 即为2 进制的11111111），当发出一个目的地址为10.1.1.255 的分组（封包）时，**它将被分发给该网段上的所有计算机**。

## 根据IP地址和子网掩码求 网络地址 和 广播地址
* 将IP地址和子网掩码换算为二进制，子网掩码连续全1的是网络地址，后面的是主机地址。

* 将运算结果中的网络地址不变，主机地址变为1(既255)，结果就是广播地址。

* 地址范围就是含在本网段内的所有主机。

### 细节
* 网络地址+1即为第一个主机地址，广播地址-1即为最后一个主机地址
* 地址范围=网络地址+1 至 广播地址-1
* 主机的数量=2^二进制位数的主机-2 （但连接主机还要减1，因为网关地址占一个）
 
减2是因为主机不包括网络地址和广播地址。

### 示例1
一个主机的IP地址是202.112.14.137，掩码是255.255.255.224

255.255.255.224转二进制
```
11111111 11111111 11111111 11100000
```

网络号(掩码位)有27位，主机号有5位

202.112.14.137转二进制
```
11001010 01110000 00001110 10001001
```

IP地址&子网掩码后得到
```
11001010 01110000 00001110 10000000
```
主机所在网络的网络地址：202.112.14.128

广播地址：网络地址的主机位全部变成1 ，10011111 即159 即：202.112.14.159

主机数
主机号有5位，那么这个地址中，就只能有的2^5−2=30个主机。

如下图所示
![F0DC1CAC-F49F-478D-9C12-CC6573DB2BCE.png](https://pic.imgdb.cn/item/6173e1302ab3f51d910deabc.png)

### 示例2
根据每个网络的主机数量进行子网地址的规划和计算子网掩码
这也可按上述原则进行计算。

比如一个子网有10台主机，那么对于这个子网需要的IP地址是
10＋1＋1＋1＝13
注意：加的第一个1是指这个网络连接时所需的网关地址，接着的两个1分别是指网络地址和广播地址。
因为13小于16（16等于2的4次方），所以**主机位为4位**。

而 256－16＝240 所以该子网掩码为255.255.255.240。

如果一个子网有14台主机，不少人常犯的错误是：依然分配具有16个地址空间的子网，而忘记了给网关分配地址。这样就错误了，因为：
14＋1＋1＋1＝17
17.大于16，所以我们只能分配具有32个地址（32等于2的5次方）空间的子网。这时子网掩码为：255.255.255.224

## 传输速率和吞吐量
传输速率又称带宽，是指单位时间内传输的数据量有多少(信号在传输介质中的传输速度是恒定的)。
带宽越大，传输能力越强。

主机之间实际的传输速率被称为吞吐量，单位bps，是衡量带宽和主机CPU处理能力、网络的拥堵程度等信息。

## 中继器
工作在OSI模型第1层，物理层面上延长网络的设备，由电缆传过来的电信号或光信号经由中继器调整和放大再传给另一个电缆。
比如小米wifi放大器。

有些中继器可以提供多个端口服务，这种中继器被称为集线器，每个端口都可以成为一个中继器。

## 网桥
工作在OSI模型第2层，连接一个网络和另一个网络的设备。

网桥根据物理地址(MAC地址)来处理相关数据。

由于具有2层数据链路层所具有的功能，有时也把网桥叫做2层交换机。

## 路由器
工作在OSI模型第3层，网络层面上连接两个网络，并对分组报文进行转发的设备 (有时候集成了交换机的功能)。

路由器IP地址来处理相关数据。

由于具有3层所具有的功能，有时也把路由器叫做3层交换机。

## 4-7层交换机-应用层
负责处理从传输层到应用层的数据。比如负载均衡服务器，网络加速器，防火墙，网关等。

## 网关
**网关(Gateway)又称网间连接器、协议转换器**。默认网关在网络层上以实现网络互连，是最复杂的网络互连设备，仅用于两个高层协议不同的网络互连。**负责协议的转换和数据的转发**。网关的结构也和路由器类似，不同的是互连层。网关既可以用于广域网互连，也可以用于局域网互连。

网关实质上是一个网络通向其他网络的IP地址。

比如有网络A和网络B，网络A的IP地址范围为“192.168.1.1~192.168.1.254”，子网掩码为255.255.255.0；
网络B的IP地址范围为“192.168.2.1~192.168.2.254”，子网掩码为255.255.255.0。

在没有路由器的情况下，两个网络之间是不能进行TCP/IP通信的，即使是两个网络连接在同一台交换机（或集线器）上，TCP/IP协议也会根据子网掩码（255.255.255.0）判定两个网络中的主机处在不同的网络里。

而要实现这两个网络之间的通信，则必须通过网关。如果网络A中的主机发现数据包的目的主机不在本地网络中，就把数据包转发给它自己的网关，再由网关转发给网络B的网关，网络B的网关再转发给网络B的某个主机。

所以说，只有设置好网关的IP地址，TCP/IP协议才能实现不同网络之间的相互通信。那么这个IP地址是哪台机器的IP地址呢？网关的IP地址是具有路由功能的设备的IP地址，具有路由功能的设备有路由器、启用了路由协议的服务器（实质上相当于一台路由器）、代理服务器（也相当于一台路由器）。

网关设备
* 家里的路由器。
* 代理服务器。






