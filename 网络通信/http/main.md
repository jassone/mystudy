## HTTP

## 一、概述
HTTP(Hyper Text Transfer Protocol)<超文本传输协议>的缩写(所以是**文本格式传输**)。是用于从WWW服务器传输超文本到本地浏览器的传输协议。HTTP是一个应用层协议，由请求和响应构成，是一个标准的个客户端和服务器模型。它的主要特点如下:
* 支持客户端/服务器模型
* 简单快速
     客户向服务器请求服务时，只需传送请求方法和路径。由于HTTP协议简单，使得HTTP服务器的程序规模小，因而通信速度很快。

* 灵活
    HTTP允许传输任意类型的数据对象.正在传输的类型由Content-Type加以标记。

*  无连接
    无连接的含义是限制每次连接只处理一个请求。服务器处理完客户端的请求，然后响应，并收到应答，后,就断开连接。这种方式可以节省传输时间。

* 无状态
    HTTP协议是无状态协议。无状态是指协议 对于事务处理没有记忆能力。这种方式的一个坏处就是，如果后续的处理需要用到之前的信息，则必须要重传，这样就导致了每次连接传输的数据量增大。好处就是，如果后续的连接不需要之前提供的信息，响应就会比较快。而为了解决HTTP的无状态特性，出现了Cookie和Session技术。

### 1、另外一个版本解读

- 超文本

  就是“超越了普通文本的文本”，它是文字、图片、音频和视频等的混合体。

- 传输

  HTTP 是一个在计算机世界里专门用来在两点之间传输数据的约定和规范。

- 协议

  HTTP 是一个用在计算机世界里的协议。它使用计算机能够理解的语言确立了一种计算机之间交流通信的规范，以及相关的各种控制和错误处理方式。

## 二、URL篇
HTTP的URL是一种特殊类型的URI,包含了用于定位查找某个网络资源的路径,格式如下:
http://host[':'port][abs_path]
http表示通过http协议来定位网络资源;host表示合法的Internet主机域名或者IP地址;port指定一个端口,如果缺省,默认是80端口.abs_path表示的是请求的资源的URL,如果什么都没写,则浏览器会帮我们加上/,作为初始的路径地址。

## 三、http报文-请求(Request)
HTTP请求由三部分构成: **请求行** **请求头** 空行 **请求正文**

![845229a31b_png.png](https://pic.imgdb.cn/item/61755a052ab3f51d913aad87.png)

下面是一个请求报文:
 ![fbc8b6a245da535_png.png](https://pic.imgdb.cn/item/61755a4e2ab3f51d913b0721.png)

* ①是请求方法，GET和POST是最常见的HTTP方法，除此以外还包括DELETE、HEAD、OPTIONS、PUT、TRACE。不过，当前的大多数浏览器只支持GET和POST
* ②为请求对应的URL地址，它和报文头的Host属性组成完整的请求URL，
* ③是协议名称及版本号。
* ④是HTTP的报文头，报文头包含若干个属性，格式为“属性名:属性值”，服务端据此获取客户端的信息。
* ⑤是报文体，它将一个页面表单中的组件值通过param1=value1&param2=value2的键值对形式编码成一个格式化串，它承载多个请求参数的数据。不但报文体可以传递请求参数，请求URL也可以通过类似于“/chapter15/user.html? param1=value1&param2=value2”的方式传递请求参数。

## 四、http报文-返回(response)
HTTP响应是由四部分构成:状态行 响应头 空行 响应体.

 ![3822d8ed347f_png.png](https://pic.imgdb.cn/item/617563932ab3f51d9142d4fe.png)

1. 第一部分:状态行,由HTTP/1.1(协议版本) 200(状态码) OK(状态码的描述) 构成
2. 第二部分:响应头,由一些键值对构成,用来说明客户端要使用的一些附加信息
3. 第三部分:空行,响应头后面的空行时必须的
4. 第四部分:响应正文,服务器返回给客户端的文本信息

## 五、HTTP响应的状态码
详见`http响应码`单独章节部分。

## 六、HTTP首部
详见`http首部`单独章节部分。

## 七、标准请求方法

### 1、HEAD

HEAD 方法与 GET 方法类似，也是请求从服务器获取资源，服务器的处理机制也是一样的，但服务器不会返回请求的实体数据，只会传回响应头，也就是资源的“元信息”。

HEAD 方法可以看做是 GET 方法的一个“简化版”或者“轻量版”。因为它的响应头与 GET 完全相同，所以可以用在很多并不真正需要资源的场合，避免传输 body 数据的浪费。

比如，想要检查一个文件是否存在，只要发个 HEAD 请求就可以了，没有必要用 GET 把整个文件都取下来。再比如，要检查文件是否有最新版本，同样也应该用 HEAD，服务器会在响应头里把文件的修改时间传回来。

## 八、其他

### 1、fragment

<font color="red"> 锚点（fragment）不会发到服务器</font>

### 2、url转义

URI 转义的规则有点“简单粗暴”，直接把非 ASCII 码或特殊字符转换成**十六进制字节值**，然后前面再加上一个“%”。例如，空格被转义成“%20”，“?”被转义成“%3F”。而中文、日文等则通常使用 UTF-8 编码后再转义，例如“银河”会被转义成“%E9%93%B6%E6%B2%B3”。

### 3、可靠的传输

它的具体做法与 TCP/UDP 差不多，都是对实际传输的数据（entity）做了一层包装，加上一个头，然后调用 **Socket API**，通过 TCP/IP 协议栈发送或者接收。

### 3、知识图谱

![af632acc.webp](https://pic.imgdb.cn/item/64d0bf151ddac507cc33bd88.webp)
