## url字符编码

## 一、哪些字符需要编码

### 1、特殊字符

有些符号在URL中是不能直接传递的，如果要在URL中传递这些特殊符号，那么就要使用他们的编码了。编码的格式为：%加字符的ASCII码，即一个百分号%，后面跟对应字符的ASCII（16进制）码值。例如 空格的编码值是"%20"。

下表中列出了一些URL特殊符号及编码

   字符     十六进制值

- 空格 - %20
- " - %22
- \# - %23
- % - %25
- & - %26
- ( - %28
- ) - %29
- \+ - %2B
- , - %2C
- / - %2F
- : - %3A
- ; - %3B
- < - %3C
- = - %3D
- \> - %3E
- ? - %3F
- @ - %40
- \ - %5C
- | - %7C 

如果想在url中传递加号，则需要转义为%2B即可，否则会解析为空格。

url转义其实也只是为了符合url的规范而已。因为在标准的url规范中中文和很多的字符是不允许出现在url中的。

## 二、为什么这些字符需要编码

1. ASCII 的控制字符

- 这些字符都是不可打印的，自然需要进行转化。

2. 一些非ASCII字符

- 这些字符自然是非法的字符范围。转化也是理所当然的了。

3. 一些保留字符

- 很明显最常见的就是“&”了，这个如果出现在url中了，那你认为是url中的一个字符呢，还是特殊的参数分割用的呢？

4. 就是一些不安全的字符了。

- 例如：空格。为了防止引起歧义，需要被转化为“+”或者%20。

## 三、转换规则

明白了这些，也就知道了为什么需要转化了，而转化的规则也是很简单的。

按照每个字符对应的字符编码，不是符合我们范围的，统统的转化为%的形式也就是了。自然也是16进制的形式。

## 四、和字符编码无关

通过urlencode的转化规则和目的，我们也很容易的看出，urleocode是基于字符编码的。同样的一个汉字，不同的编码类型，肯定对应不同的urleocode的串。gbk编码的有gbk的encode结果。

apache等服务器，接受到字符串后，可以进行decode，但是还是无法解决编码的问题。编码问题，还是需要靠约定或者字符编码的判断解决。

因此，urleocode只是为了url中一些非ascii字符，可以正确无误的被传输，至于使用哪种编码，就不是encode所关心和解决的问题了。